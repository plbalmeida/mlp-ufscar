<!DOCTYPE html>
<html>
<head>
<title>ESBD 3.1 - Prática de sistemas distribuídos.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="arquitetura-%22producer-consumer%22-ou-%22publish-subscribe%22-para-treinamento-de-modelos-de-ml">Arquitetura &quot;Producer-Consumer&quot; ou &quot;Publish-Subscribe&quot; para treinamento de modelos de ML</h1>
<p><img src="file:///home/plbalmeida/mlp-ufscar/ESBD_3-1/figures/arquitetura.png" alt=""></p>
<p>A arquitetura implementada é um exemplo de um padrão de projeto de software chamado &quot;Producer-Consumer&quot; ou &quot;Publish-Subscribe&quot;, especialmente quando implementado usando ZeroMQ. Este padrão é comumente utilizado em sistemas de processamento de mensagens e em aplicações onde a tarefa de processamento é intensiva e pode ser paralelizada.</p>
<p><strong>Producer-Consumer (Produtor-Consumidor)</strong></p>
<p>Neste caso, o Task Distributor age como um produtor, que gera tarefas ou mensagens a serem processadas. Os Workers atuam como consumidores, que pegam as tarefas do produtor e realizam o processamento necessário. O Load Balancer age como um tipo de &quot;broker&quot; ou intermediário, ajudando a distribuir as tarefas de maneira eficiente entre os vários consumidores.</p>
<p><strong>Publish-Subscribe (Publicar-Inscrever)</strong></p>
<p>O modelo Publish-Subscribe também pode ser aplicado a essa arquitetura, onde o Task Distributor é o publicador de tarefas e os Workers são os inscritos que recebem e processam as tarefas. Neste caso, o Load Balancer pode atuar como um mecanismo de roteamento de mensagens, garantindo que as tarefas sejam distribuídas de maneira adequada aos inscritos.</p>
<p>Vale destacar que esses padrões são bastante flexíveis e podem ser adaptados às necessidades específicas de uma aplicação. Por exemplo, o balanceamento de carga pode ser implementado de várias maneiras, dependendo de como as tarefas devem ser distribuídas entre os workers. Além disso, mecanismos adicionais podem ser implementados para lidar com falhas, retransmissão de tarefas e outros cenários.</p>
<p>Os principais componentes da arquitetura são:</p>
<ol>
<li>
<p><strong>Task Distributor</strong>: É o componente que distribui tarefas para os workers. Ele é responsável por definir quais tarefas precisam ser feitas e enviar essas tarefas para o balanceador de carga.</p>
</li>
<li>
<p><strong>Load Balancer (Balanceador de Carga)</strong>: O balanceador de carga age como um intermediário entre o task distributor e os workers. Ele recebe tarefas do task distributor e as distribui entre os workers disponíveis.</p>
</li>
<li>
<p><strong>Workers (Trabalhadores)</strong>: Os workers são responsáveis por executar as tarefas recebidas do balanceador de carga. Eles fazem o trabalho real (neste caso, treinando o modelo de machine learning).</p>
</li>
</ol>
<p>Vantagens dessa arquitetura:</p>
<ol>
<li>
<p><strong>Escalabilidade</strong>: Esta arquitetura pode ser facilmente escalada adicionando mais workers. Isso permite que o sistema lide com uma maior quantidade de trabalho.</p>
</li>
<li>
<p><strong>Resiliência</strong>: Se um worker falhar, as tarefas podem ser redistribuídas para outros workers, permitindo que o sistema continue funcionando.</p>
</li>
<li>
<p><strong>Eficiência</strong>: Ao distribuir o trabalho entre múltiplas máquinas, o tempo total para completar todas as tarefas pode ser significativamente reduzido.</p>
</li>
</ol>
<p>Limitações ou desvantagens dessa arquitetura:</p>
<ol>
<li>
<p><strong>Complexidade</strong>: Esta arquitetura é mais complexa do que uma arquitetura monolítica, pois requer a comunicação entre várias máquinas. Isso pode tornar o sistema mais difícil de desenvolver e manter.</p>
</li>
<li>
<p><strong>Overhead de Comunicação</strong>: A comunicação entre o task distributor, o balanceador de carga e os workers pode introduzir atrasos. Isso é especialmente verdadeiro se a quantidade de dados que precisa ser transferida é grande.</p>
</li>
<li>
<p><strong>Balanceamento de Carga</strong>: Dependendo de como o balanceamento de carga é implementado, pode ser que algumas máquinas acabem recebendo mais trabalho do que outras. Isso pode levar a um uso ineficiente dos recursos.</p>
</li>
<li>
<p><strong>Falhas na Rede</strong>: Como a arquitetura depende da comunicação através da rede, quaisquer problemas na rede podem impactar o desempenho do sistema.</p>
</li>
<li>
<p><strong>Gerenciamento de Estado</strong>: A arquitetura distribuída pode apresentar desafios quando se trata de gerenciamento de estado, particularmente se uma tarefa falhar e precisar ser retomada, ou se os resultados de várias tarefas precisam ser agregados de alguma forma.</p>
</li>
</ol>
<p>Evidências do funcionamento da solução:</p>
<p>Evidência de uso dos dois workers criados para treinar os modelos de ML.</p>
<p><img src="file:///home/plbalmeida/mlp-ufscar/ESBD_3-1/figures/evidencia_1.png" alt=""></p>
<p>E escrita dos binários dos modelos em um bucket do Amazon S3.</p>
<p><img src="file:///home/plbalmeida/mlp-ufscar/ESBD_3-1/figures/evidencia_2.png" alt=""></p>

</body>
</html>
